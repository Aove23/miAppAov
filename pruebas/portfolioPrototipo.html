<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Prueba Portafolio</title>
    <link rel="stylesheet" href="portfolio.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/material-design-icons/3.0.1/iconfont/material-icons.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Titillium+Web:wght@300;400;600;700&display=swap"
      rel="stylesheet"
    />
    <link />
  </head>
  <body>
    <div class="contenedor">
      <header>
        <div class="logo">
          <h1>Agustin Veliz</h1>
          <p>Desarrollador Web</p>
        </div>
        <form action="">
          <input
            type="text"
            class="barra-busqueda"
            id="barra-busqueda"
            placeholder="Buscar"
          />
        </form>
        <div class="categorias" id="categorias">
          <a href="#" class="activo">Todos</a>
          <a href="#">Naturaleza</a>
          <a href="#">Ciudades</a>
          <a href="#">Personas</a>
          <a href="#">Animales</a>
        </div>
      </header>

      <section class="grid" id="grid">
        <div
          class="item"
          data-categoria="animales"
          data-etiquetas="animales leones"
          data-tipo="Trabajo"
          data-titulo="Lyon"
          data-descripcion="Lorem ipsum dolor sit amet consectetur adipisicing elit."
        >
          <div class="item-contenido">
            <img class="img-portafolio" src="img/animal1.png" alt="" />
            <div class="item-hover">
              <img class="img-hover" src="img/ver.svg" alt="" />
              <p>Ver Mas</p>
            </div>
          </div>
        </div>

        <div
          class="item"
          data-categoria="animales"
          data-etiquetas="animales pandas"
          data-tipo="Proyecto"
          data-titulo="Panda"
          data-descripcion="Lorem ipsum dolor sit amet consectetur adipisicing elit."
        >
          <div class="item-contenido">
            <img class="img-portafolio" src="img/animal2.png" alt="" />
            <div class="item-hover">
              <img class="img-hover" src="img/ver.svg" alt="" />
              <p>Ver Mas</p>
            </div>
          </div>
        </div>

        <div
          class="item"
          data-categoria="ciudades"
          data-etiquetas="ciudades autos calles"
          data-tipo="Trabajo"
          data-titulo="Ciudad"
          data-descripcion="Lorem ipsum dolor sit amet consectetur adipisicing elit."
        >
          <div class="item-contenido">
            <img class="img-portafolio" src="img/ciudad1.png" alt="" />
            <div class="item-hover">
              <img class="img-hover" src="img/ver.svg" alt="" />
              <p>Ver Mas</p>
            </div>
          </div>
        </div>

        <div
          class="item"
          data-categoria="personas"
          data-etiquetas="personas mujeres"
          data-tipo="Proyecto"
          data-titulo="Persona"
          data-descripcion="Lorem ipsum dolor sit amet consectetur adipisicing elit."
        >
          <div class="item-contenido">
            <img class="img-portafolio" src="img/persona1.png" alt="" />
            <div class="item-hover">
              <img class="img-hover" src="img/ver.svg" alt="" />
              <p>Ver Mas</p>
            </div>
          </div>
        </div>

        <div
          class="item"
          data-categoria="ciudades"
          data-etiquetas="ciudades autos calles"
          data-tipo="Trabajo"
          data-titulo="Ciudad II"
          data-descripcion="Lorem ipsum dolor sit amet consectetur adipisicing elit."
        >
          <div class="item-contenido">
            <img class="img-portafolio" src="img/ciudad2.png" alt="" />
            <div class="item-hover">
              <img class="img-hover" src="img/ver.svg" alt="" />
              <p>Ver Mas</p>
            </div>
          </div>
        </div>

        <div
          class="item"
          data-categoria="naturaleza"
          data-etiquetas="naturaleza hojas plantas"
          data-tipo="Proyecto"
          data-titulo="Naturaleza"
          data-descripcion="Lorem ipsum dolor sit amet consectetur adipisicing elit."
        >
          <div class="item-contenido">
            <img class="img-portafolio" src="img/naturaleza1.png" alt="" />
            <div class="item-hover">
              <img class="img-hover" src="img/ver.svg" alt="" />
              <p>Ver Mas</p>
            </div>
          </div>
        </div>

        <div
          class="item"
          data-categoria="paisajes"
          data-etiquetas="paisajes montañas mar playa"
          data-tipo="Trabajo"
          data-titulo="Paisaje"
          data-descripcion="Lorem ipsum dolor sit amet consectetur adipisicing elit."
        >
          <div class="item-contenido">
            <img class="img-portafolio" src="img/paisaje1.png" alt="" />
            <div class="item-hover">
              <img class="img-hover" src="img/ver.svg" alt="" />
              <p>Ver Mas</p>
            </div>
          </div>
        </div>

        <div
          class="item"
          data-categoria="paisajes"
          data-etiquetas="paisajes montañas mar playa"
          data-tipo="Proyecto"
          data-titulo="Paisaje II"
          data-descripcion="Lorem ipsum dolor sit amet consectetur adipisicing elit."
        >
          <div class="item-contenido">
            <img class="img-portafolio" src="img/paisaje2.png" alt="" />
            <div class="item-hover">
              <img class="img-hover" src="img/ver.svg" alt="" />
              <p>Ver Mas</p>
            </div>
          </div>
        </div>

        <div
          class="item"
          data-categoria="personas"
          data-etiquetas="personas mujeres"
          data-tipo="Trabajo"
          data-titulo="Persona II"
          data-descripcion="Lorem ipsum dolor sit amet consectetur adipisicing elit."
        >
          <div class="item-contenido">
            <img class="img-portafolio" src="img/persona2.png" alt="" />
            <div class="item-hover">
              <img class="img-hover" src="img/ver.svg" alt="" />
              <p>Ver Mas</p>
            </div>
          </div>
        </div>
      </section>

      <section class="overlay" id="overlay">
        <div class="contenedor-img">
          <button id="btn-cerrar-popup">
            <span class="material-icons">
              highlight_off
            </span>
          </button>
          <img class="img-overlay" src="img/ciudad1.png" alt="" />
        </div>
        <div class="descripcion">
          <div class="titulo">
            <img class="svg-descripcion" src="img/job.svg" alt="" />
            <h4 class="titulo-overlay"></h4>
          </div>
          <hr />
          <p class="descripcion-overlay"></p>
        </div>
      </section>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/web-animations-js@2.3.2/web-animations.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/muuri@0.9.0/dist/muuri.min.js"></script>
    <script>
      let grid = new Muuri(".grid", {
        layout: {
          rounding: false,
        },
      });

      window.addEventListener("load", () => {
        grid.refreshItems().layout();
        document.getElementById("grid").classList.add("imagenes-cargadas");

        //Agregamos los listener de los enlaces para filtrar por categoria
        const enlaces = document.querySelectorAll("#categorias a");
        enlaces.forEach((el) => {
          el.addEventListener("click", (e) => {
            e.preventDefault();
            enlaces.forEach((enlace) => enlace.classList.remove("activo"));
            e.target.classList.add("activo");

            const categoria = e.target.innerHTML.toLowerCase();
            categoria === "todos"
              ? grid.filter("[data-categoria]")
              : grid.filter(`[data-categoria="${categoria}"]`);
          });
        });

        //Agregamos el listener para la barra de busquedas
        document
          .querySelector("#barra-busqueda")
          .addEventListener("input", (e) => {
            const busqueda = e.target.value;
            grid.filter((item) =>
              item.getElement().dataset.etiquetas.includes(busqueda)
            );
          });

        //Agregamos el listener para el overlay
        const overlay = document.getElementById("overlay");
        // const imagenes = document.querySelectorAll(".grid .item img");
        const portadas = document.querySelectorAll(".item .item-hover");
        const btnCerrar = document.getElementById("btn-cerrar-popup");
        portadas.forEach((el) => {
          el.addEventListener("click", (e) => {
            const ruta = el.parentElement.firstElementChild.getAttribute("src");
            const titulo = el.parentElement.parentElement.dataset.titulo;
            const description =
              el.parentElement.parentElement.dataset.descripcion;
            const tipo = el.parentElement.parentElement.dataset.tipo;

            overlay.classList.add("activo");
            document.querySelector("#overlay .img-overlay").src = ruta;

            if (tipo === "Trabajo") {
              document.querySelector(
                "#overlay .descripcion .svg-descripcion"
              ).src = "img/job.svg";
            } else {
              document.querySelector(
                "#overlay .descripcion .svg-descripcion"
              ).src = "img/proy.svg";
            }

            document.querySelector(
              "#overlay .titulo-overlay"
            ).textContent = titulo;
            document.querySelector(
              "#overlay .descripcion-overlay"
            ).innerHTML = description;
          });
        });

        //Eventlistener del boton cerrar
        document
          .querySelector("#btn-cerrar-popup")
          .addEventListener("click", () => {
            overlay.classList.remove("activo");
          });

        //Eventlistener del overlay
        overlay.addEventListener("click", (e) => {
          if (e.target.id === "overlay") {
            overlay.classList.remove("activo");
          }
        });
      });
    </script>
  </body>
</html>
